<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.crmtestexample.common.comCodeUtil.domain.comCodeUtilDao">
    <!-- comcode list 조회  -->
    <select id="selectComCodeList" resultType="comCodeUtilVO">
        <![CDATA[
            select
                row_number() over() as rnum,
                b.main_code as mainCode,
                a.main_name as mainCdNm,
                b.sub_code  as subCode,
                b.sub_name  as subCodeNm,
                b.created_at as createdAt,
                b.created_by as createdBy,
                b.updated_at as updatedAt,
                b.updated_by as updatedBy,
                b.use_yn as useYn
            from public."TB_ERP_CODE000" a, public."TB_ERP_CODE100_BACKUP" b
            where a.main_code  = b.main_code
        ]]>
    </select>

    <!-- comcode 중복 체크 -->
    <select id="selectCheckMainCd" parameterType="String" resultType="Int">
        <![CDATA[
            select
                count (*) as cnt
            from public."TB_ERP_CODE000" a
            where a.main_code  = #{main_code}
        ]]>
    </select>

    <!-- comcode list 삭제 -->

    <!-- comcode list 추가 -->
</mapper>
